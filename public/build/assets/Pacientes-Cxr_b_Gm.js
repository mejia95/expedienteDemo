import{I as re,r as d,o as de,b as n,j as P,d as u,e,g as k,z as ue,w as t,c as _,i as x,f as o,h as c,t as i,F as B,k as ce,n as me,S as pe}from"./app-bY3qV11d.js";import{h as L}from"./moment-C5S46NFB.js";import{_ as ve}from"./App-DXzjI6g8.js";import{A as fe}from"./AppStore-B5dmMze3.js";/* empty css                                                                  */import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const ge={class:"pa-0",style:{"min-width":"250px !important","max-width":"300px !important"}},ye={style:{"font-size":"0.800rem"},class:"poppins-semibold text-primary"},xe={class:"text-caption text-grey-darken-2"},be={class:"text-caption"},he={class:"text-center"},we={class:"text-center text-no-wrap"},Ve={style:{"font-size":"0.755rem"}},ke={colspan:"6",class:"pa-0"},N="/api/catalogos",ze={__name:"Pacientes",props:{breadcrumbs:Array,ruta_valor:String,pacientes:Object},setup(A){const I=fe(),G=A,{smAndDown:O}=re(),g=d({data:[]});de(()=>{g.value=G.pacientes});const R=async()=>{await axios.get(`${N}/consultorios`).then(r=>{F.value=r.data}).catch(async r=>{F.value=[]})},H=async()=>{await axios.get(`${N}/generos`).then(r=>{$.value=r.data}).catch(async r=>{$.value=[]})};function Q(r){return r==="Hombre"?"mdi-gender-male":r==="Mujer"?"mdi-gender-female":"mdi-account"}const p=d(!1);d(1);const D=d(""),v=d(null),f=d(null),b=d([]),h=d(),w=d(),V=d([]),z=d(!1),j=d(1),F=d([]),$=d([]),T=async()=>{console.log("Que traes en mostar filtros"),console.log(p.value),p.value?p.value=!1:(await R(),await H(),p.value=!0)},J=async()=>{if(z.value=!1,v.value||f.value){let r="Edad:";v.value&&(r+=` desde ${v.value}`),f.value&&(r+=` hasta ${f.value}`),z.value=!0}b.value&&(z.value=!0),V.value&&(z.value=!0),j.value=1,await M(),p.value=!1},K=async()=>{v.value=null,f.value=null,b.value=null,h.value=null,w.value=null,V.value=[],z.value=!1,j.value=1,await M(),p.value=!1},M=async()=>{await axios.get("/api/reportes/pacientes-obtener",{params:{page:j.value,busqueda:D.value,consultorio:b.value,sexo:V.value,edadMin:v.value,edadMax:f.value,fechaInicio:h.value,fechaFin:w.value}}).then(r=>{g.value=r.data})},W=I.debounce(M,350);return(r,a)=>{const s=n("v-col"),m=n("v-row"),U=n("v-text-field"),S=n("v-btn"),X=n("v-divider"),Y=n("v-select"),q=n("v-date-input"),Z=n("v-spacer"),C=n("v-icon"),ee=n("v-card"),te=n("v-navigation-drawer"),y=n("v-chip"),ae=n("v-progress-linear"),le=n("v-avatar"),E=n("v-container"),oe=n("v-pagination"),se=n("v-table"),ne=n("v-empty-state");return u(),P(B,null,[e(k(ue),{title:"Reporte de pacientes"}),e(ve,{breadcrumbs:A.breadcrumbs},{default:t(()=>[e(E,{fluid:""},{default:t(()=>[e(m,{class:"my-4 mx-5","no-gutters":""},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>a[10]||(a[10]=[o("span",{class:"poppins-semibold seccion-titulo"},"Reporte de pacientes",-1)])),_:1,__:[10]}),e(s,{cols:"12"},{default:t(()=>a[11]||(a[11]=[o("div",{class:"poppins-light text-grey-darken-1"}," En este reporte se muestran los pacientes registrados en los consultorios, incluyendo su nombre, consultorio asignado, edad y sexo. ",-1)])),_:1,__:[11]})]),_:1}),e(m,{class:"mt-5 mx-5 mb-2","no-gutters":""},{default:t(()=>[e(s,{class:"d-flex align-center",cols:"6",sm:"6",md:"4"},{default:t(()=>[e(U,{"hide-details":"",modelValue:D.value,"onUpdate:modelValue":[a[0]||(a[0]=l=>D.value=l),k(W)],variant:"outlined",rounded:"lg","prepend-inner-icon":"mdi-magnify",density:"compact",placeholder:"Buscar por: Id, Paciente, Sexo, Consultorio"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{class:"d-flex align-center justify-end justify-sm-end justify-md-end justify-lg-end justify-xl-end"},{default:t(()=>[e(S,{onClick:T,icon:"mdi-filter-variant",color:"primary",variant:"text"})]),_:1})]),_:1}),e(te,{modelValue:p.value,"onUpdate:modelValue":a[8]||(a[8]=l=>p.value=l),location:"right",width:"400",scrim:"black",temporary:"",persistent:"","disable-resize-watcher":"",floating:""},{default:t(()=>[e(ee,{flat:"",class:"pa-4",color:"grey-lighten-4",style:{"min-height":"100vh"}},{default:t(()=>[e(m,{align:"center",class:"mb-2 mt-n2","no-gutters":""},{default:t(()=>[e(s,null,{default:t(()=>a[12]||(a[12]=[o("span",{style:{"font-size":"1rem","font-weight":"600"}},"Filtros de búsqueda",-1)])),_:1,__:[12]}),e(s,{cols:"auto"},{default:t(()=>[e(S,{icon:"mdi-close",variant:"text",onClick:a[1]||(a[1]=l=>p.value=!1)})]),_:1})]),_:1}),e(X,{class:"mb-4"}),e(m,{dense:"",class:"mb-2"},{default:t(()=>[e(s,{cols:"12",sm:"6",md:"12",class:"mb-3"},{default:t(()=>[e(U,{modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=l=>v.value=l),label:"Edad mínima",type:"number",min:"0",clearable:"","bg-color":"white",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-numeric","hide-details":""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",sm:"6",md:"12",class:"mb-3"},{default:t(()=>[e(U,{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=l=>f.value=l),clearable:"",label:"Edad máxima",type:"number",min:v.value,"bg-color":"white",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-numeric","hide-details":""},null,8,["modelValue","min"])]),_:1}),e(s,{cols:"12",sm:"6",md:"12",class:"mb-3"},{default:t(()=>[e(Y,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=l=>b.value=l),items:F.value,"item-value":"nombre","item-title":"nombre",label:"Consultorio",variant:"outlined",density:"compact",multiple:"","bg-color":"white",chips:"",clearable:"","prepend-inner-icon":"mdi-hospital","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12",sm:"6",md:"12",class:"mb-3"},{default:t(()=>[e(Y,{modelValue:V.value,"onUpdate:modelValue":a[5]||(a[5]=l=>V.value=l),items:$.value,"item-value":"GeneroEtiqueta","item-title":"GeneroEtiqueta",label:"Sexo",variant:"outlined","bg-color":"white",density:"compact",multiple:"",chips:"",clearable:"","prepend-inner-icon":"mdi-gender-male-female","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(m,{dense:"",align:"end",class:"mt-n2"},{default:t(()=>[e(s,{cols:"12",md:"12"},{default:t(()=>[a[13]||(a[13]=o("span",{class:"text-caption text-grey-darken-1 mg-5"},"Rango de fechas",-1)),e(q,{modelValue:h.value,"onUpdate:modelValue":a[6]||(a[6]=l=>h.value=l),label:"Desde",variant:"outlined","bg-color":"white",density:"compact","prepend-icon":"","prepend-inner-icon":"mdi-calendar-start","hide-details":""},null,8,["modelValue"])]),_:1,__:[13]}),e(s,{cols:"12",md:"12",class:"mt-n3"},{default:t(()=>[a[14]||(a[14]=o("span",{class:"text-caption"}," ",-1)),e(q,{modelValue:w.value,"onUpdate:modelValue":a[7]||(a[7]=l=>w.value=l),label:"Hasta",variant:"outlined","prepend-icon":"",min:h.value,"bg-color":"white",density:"compact","prepend-inner-icon":"mdi-calendar-end","hide-details":""},null,8,["modelValue","min"])]),_:1,__:[14]}),e(s,{cols:"12",md:"12",class:"d-flex align-end justify-end ga-2 mb-3"},{default:t(()=>[e(Z),e(S,{color:"primary",variant:"text",class:"text-none",onClick:K,rounded:"lg"},{default:t(()=>[e(C,{class:"mr-2",size:"15"},{default:t(()=>a[15]||(a[15]=[c("mdi-trash-can")])),_:1,__:[15]}),a[16]||(a[16]=c(" Limpiar "))]),_:1,__:[16]}),e(S,{color:"primary",class:"text-none",onClick:J,rounded:"lg"},{default:t(()=>[e(C,{class:"mr-2",size:"15"},{default:t(()=>a[17]||(a[17]=[c("mdi-filter-check")])),_:1,__:[17]}),a[18]||(a[18]=c(" Aplicar "))]),_:1,__:[18]})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),z.value&&!p.value?(u(),_(m,{key:0,class:"mx-5 mt-n1 mb-n3"},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[a[19]||(a[19]=o("span",{class:"text-caption text-grey-darken-1 mr-2"},"Filtros activos:",-1)),v.value||f.value?(u(),_(y,{key:0,color:"primary","text-color":"white",size:"small",class:"ma-1"},{default:t(()=>[c(" Edad: Desde "+i(v.value)+" "+i(f.value?` a ${f.value}`:null)+" años ",1)]),_:1})):x("",!0),b.value.length>0?(u(),_(y,{key:1,color:"primary","text-color":"white",size:"small",class:"ma-1"},{default:t(()=>[c(" Consultorio: "+i(b.value.join(", ")),1)]),_:1})):x("",!0),V.value.length>0?(u(),_(y,{key:2,color:"primary","text-color":"white",size:"small",class:"ma-1"},{default:t(()=>[c(" Sexo: "+i(V.value.join(", ")),1)]),_:1})):x("",!0),h.value||w.value?(u(),_(y,{key:3,color:"primary","text-color":"white",size:"small",class:"ma-1"},{default:t(()=>[c(" Desde: "+i(k(L)(h.value).format("YYYY-MM-DD"))+" "+i(w.value?` a ${k(L)(w.value).format("YYYY-MM-DD")}`:null),1)]),_:1})):x("",!0)]),_:1,__:[19]})]),_:1})):x("",!0),k(I).LoaderPeticionenCurso?(u(),_(m,{key:1,class:"mx-5 mt-5 mb-n4","no-gutters":""},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[e(ae,{color:"primary",indeterminate:""})]),_:1})]),_:1})):x("",!0),e(m,{class:"mx-5 mt-5","no-gutters":""},{default:t(()=>[g.value.data.length>0?(u(),_(s,{key:0,cols:"12",class:"border-thin rounded-lg"},{default:t(()=>[e(se,null,{default:t(()=>[a[21]||(a[21]=o("thead",null,[o("tr",null,[o("th",{class:"text-left pa-3"},"Paciente"),o("th",{class:"text-left pa-3"},"Consultorio"),o("th",{class:"text-left pa-3"},"Edad"),o("th",{class:"text-left pa-3"},"Sexo"),o("th",{class:"text-center pa-3"},"Consultas"),o("th",{class:"text-center pa-3"}," Act. reciente ")])],-1)),o("tbody",null,[(u(!0),P(B,null,ce(g.value.data,(l,ie)=>(u(),P("tr",{key:l.paciente,class:me([ie%2===0?"bg-grey-lighten-4":"","hover-row"])},[o("td",ge,[e(E,{fluid:"",class:"pa-0 px-2"},{default:t(()=>[e(m,{"no-gutters":"",class:"d-flex align-center"},{default:t(()=>[k(O)?x("",!0):(u(),_(s,{key:0,cols:"12",sm:"12",md:"auto",lg:"auto",xl:"auto",class:"d-flex pa-2 justify-center"},{default:t(()=>[e(le,{size:"20",color:"primary",class:"mr-2 opacity-70"},{default:t(()=>[e(C,{color:"white",size:"12"},{default:t(()=>a[20]||(a[20]=[c("mdi-hospital-box")])),_:1,__:[20]})]),_:1})]),_:1})),e(s,null,{default:t(()=>[e(m,{"no-gutters":""},{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[o("span",ye,i(l.paciente),1)]),_:2},1024),e(s,{cols:"12"},{default:t(()=>[o("span",xe,"ID: "+i(l.pid.$oid),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),o("td",null,[e(y,{color:"primary","text-color":"white",size:"small"},{default:t(()=>[e(C,{icon:"mdi-stethoscope",size:"14",class:"mr-1"}),c(i(l.consultorio),1)]),_:2},1024)]),o("td",null,[e(y,{color:"grey-darken-2","text-color":"black",size:"small"},{default:t(()=>[o("span",be,i(l.edad),1)]),_:2},1024)]),o("td",null,[e(y,{color:"primary","text-color":"primary",size:"small"},{default:t(()=>[e(C,{icon:Q(l.genero),color:"primary",size:"15",class:"mr-1"},null,8,["icon"]),c(" "+i(l.genero),1)]),_:2},1024)]),o("td",he,[e(k(pe),{href:`/pacientes/consulta/${l.pid.$oid}`},{default:t(()=>[e(y,{color:"primary","text-color":"white",size:"small",class:"font-weight-bold elevation-2"},{default:t(()=>[e(C,{icon:"mdi-calendar-check",size:"14",class:"mr-1"}),c(" "+i(l.consultas),1)]),_:2},1024)]),_:2},1032,["href"])]),o("td",we,[o("span",Ve,i(l.act_reciente),1)])],2))),128))]),o("tfoot",null,[o("tr",null,[o("td",ke,[e(E,{fluid:"",class:"pa-0"},{default:t(()=>[e(m,{"no-gutters":""},{default:t(()=>[e(s,{class:"d-flex justify-start align-center"},{default:t(()=>[g.value.last_page>1?(u(),_(oe,{key:0,modelValue:j.value,"onUpdate:modelValue":[a[9]||(a[9]=l=>j.value=l),M],elevation:"0",variant:"elevated","active-color":"primary",rounded:"",density:"compact",length:g.value.last_page,"total-visible":5},null,8,["modelValue","length"])):x("",!0)]),_:1}),e(s,{class:"d-flex align-center justify-end text-primary poppins-light px-2"},{default:t(()=>[c(" Mostrando "+i(g.value.to)+" de "+i(g.value.total)+" registros ",1)]),_:1})]),_:1})]),_:1})])])])]),_:1,__:[21]})]),_:1})):(u(),_(s,{key:1,class:"mt-10"},{default:t(()=>[e(ne,{icon:"mdi-account-off",text:"No hay registros disponibles, o no se encontró ninguna coincidencia con los filtros aplicados o la búsqueda.",title:"Sin pacientes encontrados"})]),_:1}))]),_:1})]),_:1})]),_:1},8,["breadcrumbs"])],64)}}},Ue=_e(ze,[["__scopeId","data-v-d4337369"]]);export{Ue as default};
