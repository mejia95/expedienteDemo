import{_ as sa}from"./App-DXzjI6g8.js";import ra from"./DialogMedicamentos-wP1kKnHo.js";import{u as ia,r as u,o as ua,A as B,s as da,p as ma,b as d,j as q,d as x,e,w as l,f as t,c as j,i as O,m as U,h as f,g as ca,t as v,F as G,k as va}from"./app-bY3qV11d.js";import{A as pa}from"./AppAlerta-CEk7FTVV.js";import{A as fa}from"./Aplicacion-DUGPUpZm.js";import"./AppStore-B5dmMze3.js";/* empty css            *//* empty css                                                                  */import"./_plugin-vue_export-helper-DlAUqK2U.js";const _a={class:"text-primary"},ga={class:"text-primary"},ya={class:"text-primary"},xa={class:"text-primary"},ba={class:"text-primary"},Aa={class:"text-primary"},ka={class:"text-primary"},wa={class:"elevation-1 bg-white"},Va={colspan:"8"},F="/catalogos",qa={__name:"ListaMedicamentos",setup(Ma){const I=ia(),s=fa(),M=u(!1),T=u(null),A=u(1),m=u(null),r=u(null),C=u(0),k=u(0),P=u([]),c=u([]),b=u(!1),E=u(null),_=u(!1),S=u([]),h=u(null),D=u(null);u([]),ua(async()=>{await I(0,{}),await w(),b.value=c.value.length==C.value});const w=async()=>{await I(0,{}),_.value=!0;var i={params:{pagina:A.value,ordenarPor:m.value,orden:r.value,busqueda:E.value}};console.log("Parametros:",i);const a=`${F}/medicamentos`;await B.get(a,i).then(o=>{P.value=o.data&&o.data.data?o.data:{data:[]},C.value=o.data.total,k.value=o.data.to,_.value=!1,S.value=o.data.medicamentos_seleccionados?o.data.medicamentos_seleccionados:[],b.value||S.value.forEach(p=>{c.value.includes(p)||c.value.push(p)}),console.log("Este es el response de medicamentos:",o.data)}).catch(o=>{console.log(o),_.value=!1})},V=async i=>{m.value=i,r.value?r.value==1?r.value="-1":(r.value=null,m.value=null):r.value=1,await w()},L=async i=>{A.value=i,await w()};da(c,i=>{});const H=i=>{b.value=c.value.length==C.value};function J(){if(b.value){const i=`${F}/medicamentos/todos`;B.get(i).then(a=>{c.value=a.data}).catch(a=>{_.value=!1})}else c.value=[...S.value]}const K=async()=>{A.value=1,await w()};function Q(i,a){let o;return function(...p){clearTimeout(o),o=setTimeout(()=>i.apply(this,p),a)}}const R=()=>{s.EstadoAlerta=1,s.MostrarAlerta=!0,s.TituloAlerta="¿Estás seguro?",s.IconoAlerta="mdi-help-circle",s.MensajeAlerta="Se guardarán los medicamentos seleccionados.",s.CallbackAlerta="GuardarMedicamentos"},W=async()=>{var i={medicamentos:c.value};const a=`${F}/medicamentos/guardar/consultorio`;await B.post(a,i).then(o=>{s.EstadoAlerta=2,s.MostrarAlerta=!0,s.TituloAlerta="Éxito",s.IconoAlerta="mdi-check-circle",s.MensajeAlerta=o.data.mensaje,s.CallbackAlerta="",w()}).catch(o=>{_.value=!1,s.EstadoAlerta=0,s.MostrarAlerta=!0,s.CallbackAlerta=null,s.TituloAlerta="Error",s.IconoAlerta="mdi-close-circle",s.MensajeAlerta=o.response.data.message})},X=Q(K,340);return ma("FuncionesPadre",{GuardarMedicamentos:W}),(i,a)=>{const o=d("v-col"),p=d("v-row"),g=d("v-btn"),N=d("v-tooltip"),Y=d("v-text-field"),Z=d("v-progress-linear"),aa=d("v-checkbox-btn"),y=d("v-icon"),ea=d("v-checkbox"),la=d("v-pagination"),z=d("v-container"),ta=d("v-table"),oa=d("v-empty-state"),na=d("v-dialog");return x(),q(G,null,[e(sa,{breadcrumbs:i.breadcrumbs},{default:l(()=>[e(z,{fluid:""},{default:l(()=>[e(p,{class:"my-4 mx-5","no-gutters":""},{default:l(()=>[e(o,{cols:"12"},{default:l(()=>a[12]||(a[12]=[t("span",{class:"poppins-semibold seccion-titulo"},"Lista de medicamentos",-1)])),_:1,__:[12]}),e(o,{cols:"12"},{default:l(()=>a[13]||(a[13]=[t("div",{class:"poppins-light text-grey-darken-1"}," Selecciona los medicamentos que necesitas para tu consultorio. ",-1)])),_:1,__:[13]})]),_:1}),e(p,{class:"d-flex justify-end mx-5"},{default:l(()=>[e(o,{cols:"6",sm:"4",md:"4",lg:"8",xl:"8",class:"d-flex justify-start"},{default:l(()=>[e(N,{text:"Guardar medicamentos para el consultorio"},{activator:l(({props:n})=>[k.value>0?(x(),j(g,U({key:0,color:"primary",rounded:"lg",onClick:R,class:"ma-2",density:"comfortable"},n),{default:l(()=>a[14]||(a[14]=[f(" Agregar ")])),_:2,__:[14]},1040)):O("",!0)]),_:1})]),_:1}),e(o,{cols:"6",sm:"8",md:"8",lg:"4",xl:"4",class:"d-flex justify-end"},{default:l(()=>[e(Y,{density:"compact",label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined",flat:"",modelValue:E.value,"onUpdate:modelValue":[a[0]||(a[0]=n=>E.value=n),ca(X)],"hide-details":"",rounded:"lg","single-line":"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1}),a[25]||(a[25]=t("span",{class:"font-weight-light ml-10",style:{"font-size":".9rem"}},"No olvides guardar los cambios que realices en los medicamentos.",-1)),e(p,{class:"mx-5 mt-n2"},{default:l(()=>[k.value>0?(x(),j(o,{key:0,cols:"12",class:"mt-2"},{default:l(()=>[e(z,{fluid:"",class:"pa-0"},{default:l(()=>[e(Z,{active:_.value,indeterminate:_.value,color:"primary",location:"bottom"},null,8,["active","indeterminate"]),e(ta,{density:"compact",class:"rounded-lg elevation-0 border-thin"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",_a,[e(aa,{class:"pe-2",modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=n=>b.value=n),onChange:J,indeterminate:c.value.length>0&&c.value.length<k.value},null,8,["modelValue","indeterminate"])]),a[20]||(a[20]=t("th",{class:"text-primary"},[t("span",{class:"mr-2"},"#")],-1)),t("th",ga,[a[15]||(a[15]=t("span",{class:"mr-2"},"Fármaco(s) ",-1)),e(g,{icon:"",variant:"flat",size:"x-small",onClick:a[2]||(a[2]=n=>V("farmacos"))},{default:l(()=>[e(y,{color:"primary"},{default:l(()=>[f(v(m.value=="farmacos"&&r.value==1?"mdi-menu-up":m.value=="farmacos"&&r.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),t("th",ya,[a[16]||(a[16]=t("span",{class:"mr-2"},"Forma farmacéutica ",-1)),e(g,{icon:"",variant:"flat",size:"x-small",onClick:a[3]||(a[3]=n=>V("forma_farmaceutica"))},{default:l(()=>[e(y,{color:"primary"},{default:l(()=>[f(v(m.value=="forma_farmaceutica"&&r.value==1?"mdi-menu-up":m.value=="forma_farmaceutica"&&r.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),t("th",xa,[a[17]||(a[17]=t("span",{class:"mr-2"},"Concentración",-1)),e(g,{icon:"",variant:"flat",size:"x-small",onClick:a[4]||(a[4]=n=>V("concentracion"))},{default:l(()=>[e(y,{color:"primary"},{default:l(()=>[f(v(m.value=="concentracion"&&r.value==1?"mdi-menu-up":m.value=="concentracion"&&r.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),t("th",ba,[a[18]||(a[18]=t("span",{class:"mr-2"},"Denominación distintiva",-1)),e(g,{icon:"",variant:"flat",size:"x-small",onClick:a[5]||(a[5]=n=>V("fecha_nacimiento"))},{default:l(()=>[e(y,{color:"primary"},{default:l(()=>[f(v(m.value=="fecha_nacimiento"&&r.value==1?"mdi-menu-up":m.value=="fecha_nacimiento"&&r.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),t("th",Aa,[a[19]||(a[19]=t("span",{class:"mr-2"},"Estado",-1)),e(g,{icon:"",variant:"flat",size:"x-small",onClick:a[6]||(a[6]=n=>V("estado"))},{default:l(()=>[e(y,{color:"primary"},{default:l(()=>[f(v(m.value=="estado"&&r.value==1?"mdi-menu-up":m.value=="estado"&&r.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),a[21]||(a[21]=t("th",{class:"text-primary"},null,-1))])]),t("tbody",null,[(x(!0),q(G,null,va(P.value.data,n=>(x(),q("tr",{key:n.id},[t("td",ka,[e(ea,{value:n.numero,modelValue:c.value,"onUpdate:modelValue":[a[7]||(a[7]=$=>c.value=$),a[8]||(a[8]=$=>H())],"hide-details":"",multiple:"",class:"pe-2"},null,8,["value","modelValue"])]),t("td",null,v(n.numero),1),t("td",null,v(n.farmacos),1),t("td",null,v(n.forma_farmaceutica),1),t("td",null,v(n.concentracion),1),t("td",null,v(n.denominacion_distintiva),1),t("td",null,[e(y,{class:"mr-2",icon:"mdi-circle",size:"x-small",color:c.value.includes(n.numero)?"success":"#abb2b9"},null,8,["color"]),t("span",null,v(n.visible),1)]),t("td",null,[e(N,{text:"Más información",location:"left"},{activator:l(({props:$})=>[e(g,U({ref_for:!0},$,{variant:"text",icon:"",color:"primary",onClick:()=>{T.value=n,M.value=!0}}),{default:l(()=>[e(y,null,{default:l(()=>a[22]||(a[22]=[f("mdi-message-text")])),_:1,__:[22]})]),_:2},1040,["onClick"])]),_:2},1024)])]))),128))]),t("tfoot",null,[t("tr",wa,[t("td",Va,[e(z,{fluid:"",class:"pa-0"},{default:l(()=>[e(p,{"no-gutters":""},{default:l(()=>[e(o,{class:"d-flex align-center text-primary"},{default:l(()=>[f(" Mostrando "+v(k.value)+" de "+v(C.value)+" registros ",1)]),_:1}),e(o,{class:"d-flex justify-end"},{default:l(()=>[e(la,{modelValue:A.value,"onUpdate:modelValue":[a[9]||(a[9]=n=>A.value=n),L],color:"primary",length:P.value.last_page,"total-visible":5},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})])])])]),_:1})]),_:1})]),_:1})):(x(),j(o,{key:1,cols:"12"},{default:l(()=>[e(oa,{color:"primary",icon:"mdi-magnify"},{title:l(()=>a[23]||(a[23]=[t("p",{class:"text-primary poppins-semibold"}," Sin resultados ",-1)])),text:l(()=>a[24]||(a[24]=[t("p",{class:"text-primary"}," No se encontraron datos que coincidan con los filtros aplicados o no hay información disponible en este momento. ",-1)])),_:1})]),_:1}))]),_:1})]),_:1,__:[25]})]),_:1},8,["breadcrumbs"]),e(na,{modelValue:M.value,"onUpdate:modelValue":a[11]||(a[11]=n=>M.value=n),"max-width":"500"},{default:l(()=>[T.value?(x(),j(ra,{key:0,item:T.value,onClose:a[10]||(a[10]=n=>M.value=!1)},null,8,["item"])):O("",!0)]),_:1},8,["modelValue"]),e(pa,{ref_key:"MensajeAppAlerta",ref:h,callback:D.value},null,8,["callback"])],64)}}};export{qa as default};
