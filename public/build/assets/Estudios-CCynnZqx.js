import{u as J,r as c,a as K,p as W,b as s,j as X,d as M,e as o,c as Y,i as Z,w as i,f as p,h as x,t as L,g as N,l as C,v as R,F as D}from"./app-bY3qV11d.js";import{A as aa}from"./AppAlerta-CEk7FTVV.js";import{A as ea}from"./Aplicacion-DUGPUpZm.js";import la from"./Laboratorio-BW18qbKT.js";import oa from"./Electrocardiograma-wm30GzQ_.js";import ra from"./RadiografiaTorax-mCJY_iPD.js";/* empty css            */import"./AppStore-B5dmMze3.js";/* empty css                                                                  */import"./_plugin-vue_export-helper-DlAUqK2U.js";const ia="/consulta/",ha={__name:"Estudios",setup(ta,{expose:Q}){const $=J(),v=c(1),t=ea(),q=c(null),A=c(0),e=c(null),r=c(null),n=c(null),T=c([]),w=c([]),V=c([]),y=c(null),B=c(null);c(null);const j=K().props.id,S=(a,l="",m=512)=>{const _=atob(a),f=[];for(let u=0;u<_.length;u+=m){const d=_.slice(u,u+m),k=new Array(d.length);for(let h=0;h<d.length;h++)k[h]=d.charCodeAt(h);const g=new Uint8Array(k);f.push(g)}return new Blob(f,{type:l})},F=a=>{if(!a||a.length<1)return null;if("archivoLab1"in a[0]&&a[0].archivoLab1){const l=a[0].archivoLab1.base64_archivo,m=S(l,a[0].archivoLab1.tipo_archivo),_=a[0].archivoLab1.nombre_archivo,f=new File([m],_,{type:a[0].archivoLab1.tipo_archivo});e.value.archivoLab1=f,e.value.archivoDatos||(e.value.archivoDatos={}),e.value.archivoDatos.type=a[0].archivoLab1.tipo_archivo,e.value.archivoDatos.base64=a[0].archivoLab1.base64_archivo,e.value.NombreArchivo=a[0].archivoLab1.nombre_archivo}e.value.link_laboratorio=a[0].link_laboratorio,e.value.seccionGuardada=a[0].guardada,e.value.archivoLab2=a[0].archivoLab2,e.value.archivoLab3=a[0].archivoLab3,e.value.hematocrito=a[0].hematocrito,e.value.leucocitos=a[0].leucocitos,e.value.linfocitos=a[0].linfocitos,e.value.monocitos=a[0].monocitos,e.value.volumen_corpuscular=a[0].volumen_corpuscular,e.value.plaquetas=a[0].plaquetas,e.value.glucemia=a[0].glucemia,e.value.urea=a[0].urea,e.value.creatinina=a[0].creatinina,e.value.sodio=a[0].sodio,e.value.potasio=a[0].potasio,e.value.cloro=a[0].cloro,e.value.got=a[0].got,e.value.gpt=a[0].gpt,e.value.fosfatasa=a[0].fosfatasa,e.value.bilirrubina=a[0].bilirrubina,e.value.coagulograma=a[0].coagulograma,e.value.ph=a[0].ph,e.value.co2=a[0].co2,e.value.hco3=a[0].hco3,e.value.po2=a[0].po2,e.value.saturacion_oxigeno=a[0].saturacion_oxigeno,e.value.anion=a[0].anion,e.value.orina=a[0].orina,e.value.glucosa=a[0].glucosa,e.value.hemocultivo=a[0].hemocultivo,e.value.urocultivo=a[0].urocultivo,e.value.descripcion_urocultivo=a[0].descripcion_urocultivo},G=a=>{if(!a||a.length<1)return null;r.value.link_electro=a[0].link_electro,r.value.archivoElect1=a[0].archivoElect1,r.value.archivoElect2=a[0].archivoElect2,r.value.archivoElect3=a[0].archivoElect3,r.value.descripcion=a[0].descripcion,r.value.ritmo=a[0].ritmo,r.value.frecuencia_cardiaca=a[0].frecuencia_cardiaca,r.value.eje=a[0].eje,r.value.duracionQRS=a[0].duracionQRS,r.value.ondaP=a[0].ondaP,r.value.ondaT=a[0].ondaT,r.value.segmento=a[0].segmento,r.value.intervaloPR=a[0].intervaloPR,r.value.intervaloQTC=a[0].intervaloQTC,r.value.conclusion=a[0].conclusion},I=a=>{n.value.link_radiografia=a[0].link_radiografia,n.value.archivoRadio1=a[0].archivoRadio1,n.value.archivoRadio2=a[0].archivoRadio2,n.value.archivoRadio3=a[0].archivoRadio3,n.value.partes_blandas=a[0].partes_blandas,n.value.partes_oseas=a[0].partes_oseas,n.value.campos_pulmonares=a[0].campos_pulmonares,n.value.silueta_cardiovascular=a[0].silueta_cardiovascular,n.value.indice_cardiotoracico=a[0].indice_cardiotoracico,n.value.conclusiones=a[0].conclusiones},P=async()=>{T.value={link_laboratorio:e.value.link_laboratorio,archivoLab1:e.value.archivoLab1,archivoLab2:e.value.archivoLab2,archivoLab3:e.value.archivoLab3,hematocrito:e.value.hematocrito,leucocitos:e.value.leucocitos,linfocitos:e.value.linfocitos,monocitos:e.value.monocitos,volumen_corpuscular:e.value.volumen_corpuscular,plaquetas:e.value.plaquetas,glucemia:e.value.glucemia,urea:e.value.urea,creatinina:e.value.creatinina,sodio:e.value.sodio,potasio:e.value.potasio,cloro:e.value.cloro,got:e.value.got,gpt:e.value.gpt,fosfatasa:e.value.fosfatasa,bilirrubina:e.value.bilirrubina,coagulograma:e.value.coagulograma,ph:e.value.ph,co2:e.value.co2,hco3:e.value.hco3,po2:e.value.po2,saturacion_oxigeno:e.value.saturacion_oxigeno,anion:e.value.anion,orina:e.value.orina,glucosa:e.value.glucosa,hemocultivo:e.value.hemocultivo,urocultivo:e.value.urocultivo,descripcion_urocultivo:e.value.descripcion_urocultivo},w.value={link_electro:r.value.link_electro,archivoElect1:r.value.archivoElect1,archivoElect2:r.value.archivoElect2,archivoElect3:r.value.archivoElect3,descripcion:r.value.descripcion,ritmo:r.value.ritmo,frecuencia_cardiaca:r.value.frecuencia_cardiaca,eje:r.value.eje,duracionQRS:r.value.duracionQRS,ondaP:r.value.ondaP,ondaT:r.value.ondaT,segmento:r.value.segmento,intervaloPR:r.value.intervaloPR,intervaloQTC:r.value.intervaloQTC,conclusion:r.value.conclusion},V.value={link_radiografia:n.value.link_radiografia,archivoRadio1:n.value.archivoRadio1,archivoRadio2:n.value.archivoRadio2,archivoRadio3:n.value.archivoRadio3,partes_blandas:n.value.partes_blandas,partes_oseas:n.value.partes_oseas,campos_pulmonares:n.value.campos_pulmonares,silueta_cardiovascular:n.value.silueta_cardiovascular,indice_cardiotoracico:n.value.indice_cardiotoracico,conclusiones:n.value.conclusiones};var a=`${ia}${j}/estudios`;await axios.post(a,{consulta:j,datos_laboratorio:T.value,datos_electro:w.value,datos_radiografia:V.value,otros:y.value,guardar:A.value},{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{l.data.estudios[0]&&(l.data.estudios[0].Laboratorio&&F(l.data.estudios[0].Laboratorio),l.data.estudios[0].Electrocardiograma&&G(l.data.estudios[0].Electrocardiograma),l.data.estudios[0].Radiografia&&I(l.data.estudios[0].Radiografia),y.value=l.data.estudios[0].otros,A.value==1&&(t.EstadoAlerta=2,t.MostrarAlerta=!0,t.TituloAlerta="Éxito",t.IconoAlerta="mdi-check-circle",t.MensajeAlerta=l.data.message,t.CallbackAlerta=null),t.seccion_estudios=!0)}).catch(l=>{l.response&&A.value==1?(t.EstadoAlerta=0,t.MostrarAlerta=!0,t.TituloAlerta="Error",t.IconoAlerta="mdi-close-circle",t.MensajeAlerta=l.response.data.message?l.response.data.message:"<p>No se pudo completar el registro de la sección de <strong>Estudios</strong>. Por favor, intente nuevamente más tarde o contacta con el soporte si el problema persiste.</p>",t.CallbackAlerta=null,t.seccion_estudios=!1):(t.MostrarAlerta=!0,t.TituloAlerta="Error",t.IconoAlerta="mdi-close-circle",t.MensajeAlerta="<p>No se pudo completar el registro de la sección de <strong>Estudios</strong>. Por favor, intente nuevamente más tarde o contacta con el soporte si el problema persiste.</p>",t.CallbackAlerta=null)})},U=async()=>{await $("#contenedor-consulta",{}),t.EstadoAlerta=1,t.MostrarAlerta=!0,t.TituloAlerta="¿Estás seguro?",t.IconoAlerta="mdi-help-circle",t.MensajeAlerta="La información que ha ingresado se guardará. Asegúrese de que todos los datos sean correctos antes de continuar.",t.CallbackAlerta="GuardarEstudiosLaboratorio"};return W("FuncionesPadre",{GuardarEstudiosLaboratorio:P}),Q({GuardarEstudiosLaboratorio:P}),(a,l)=>{const m=s("v-icon"),_=s("v-avatar"),f=s("v-toolbar-title"),u=s("v-col"),d=s("v-row"),k=s("v-toolbar"),g=s("v-tab"),h=s("v-tabs"),O=s("v-alert"),H=s("v-textarea"),E=s("v-container"),z=s("v-btn");return M(),X(D,null,[o(k,{color:"white",class:"pa-0 border-sm rounded-t-lg"},{default:i(()=>[o(d,null,{default:i(()=>[o(u,{class:"d-flex align-center"},{default:i(()=>[o(f,{class:"ps-5 text-primary-darken-3"},{default:i(()=>[o(m,{size:"18"},{default:i(()=>l[4]||(l[4]=[x("mdi-test-tube")])),_:1,__:[4]}),l[5]||(l[5]=p("span",{class:"mx-1 poppins-semibold",style:{"font-size":"1.1rem"}}," Estudios ",-1)),o(_,{size:"25",rounded:"pill",color:"primary-darken-1",class:"mx-2"},{default:i(()=>[o(m,{size:"15"},{default:i(()=>[x(L(N(t).seccion_estudios?"mdi-check-circle":"mdi-content-save-alert"),1)]),_:1})]),_:1})]),_:1,__:[5]})]),_:1})]),_:1})]),_:1}),o(E,{class:"rounded-b-xl px-4 px-sm-6 px-md-6 px-lg-6 px-xl-6 border",fluid:""},{default:i(()=>[o(d,{class:"mt-0"},{default:i(()=>[o(u,{cols:"12"},{default:i(()=>[o(h,{density:"compact",color:"primary-darken-1",modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=b=>v.value=b)},{default:i(()=>[o(g,{value:1,variant:v.value==1?"elevated":"tonal",class:"text-none mr-2",rounded:"t-lg","hide-slider":""},{default:i(()=>l[6]||(l[6]=[p("span",{style:{"font-size":"0.775rem"}},"Ex. Laboratorio",-1)])),_:1,__:[6]},8,["variant"]),o(g,{value:2,variant:v.value==2?"elevated":"tonal",class:"text-none mr-2",rounded:"t-lg","hide-slider":""},{default:i(()=>l[7]||(l[7]=[p("span",{style:{"font-size":"0.775rem"}},"Electrocardiograma",-1)])),_:1,__:[7]},8,["variant"]),o(g,{value:3,variant:v.value==3?"elevated":"tonal",class:"text-none mr-2",rounded:"t-lg","hide-slider":""},{default:i(()=>l[8]||(l[8]=[p("span",{style:{"font-size":"0.775rem"}},"Radiografía",-1)])),_:1,__:[8]},8,["variant"]),o(g,{value:4,variant:v.value==4?"elevated":"tonal",class:"text-none mr-2",rounded:"t-lg","hide-slider":""},{default:i(()=>l[9]||(l[9]=[p("span",{style:{"font-size":"0.775rem"}},"Otros",-1)])),_:1,__:[9]},8,["variant"])]),_:1},8,["modelValue"])]),_:1}),o(O,{class:"my-1 mx-4",color:"primary",variant:"tonal",density:"compact",rounded:"lg"},{default:i(()=>[o(m,{size:"15"},{default:i(()=>l[10]||(l[10]=[x("mdi-information")])),_:1,__:[10]}),l[11]||(l[11]=p("span",{style:{"font-size":"0.875rem"},class:"mx-2"},"Recuerde guardar cada sección para evitar la pérdida de información en caso de imprevistos.",-1))]),_:1,__:[11]})]),_:1}),o(d,{class:""},{default:i(()=>[o(u,{cols:"12",class:"pt-3"},{default:i(()=>[C(o(la,{ref_key:"Laboratorio_ref",ref:e},null,512),[[R,v.value==1]]),C(o(oa,{ref_key:"Electrocardiograma_ref",ref:r},null,512),[[R,v.value==2]]),C(o(ra,{ref_key:"Radiografia",ref:n},null,512),[[R,v.value==3]]),C(o(E,null,{default:i(()=>[o(d,{class:"px-sm-2 px-md-2 px-lg-2 px-xl-4 mt-n4"},{default:i(()=>[o(u,{cols:"12"},{default:i(()=>[o(E,{fluid:"",class:"pa-0"},{default:i(()=>[o(d,{class:"d-flex align-center","no-gutters":""},{default:i(()=>[o(u,{cols:"12"},{default:i(()=>l[12]||(l[12]=[p("span",{style:{"font-size":"0.875rem"},class:"poppins-semibold"},"Describa otros estudios",-1)])),_:1,__:[12]}),o(u,{cols:"12"},{default:i(()=>[o(H,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=b=>y.value=b),counter:255,"auto-grow":"",maxlength:"255",required:"",variant:"outlined",flat:"",rounded:"lg"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[R,v.value==4]])]),_:1})]),_:1}),o(d,{class:"d-flex align-center ma-1"},{default:i(()=>[o(u,{cols:"12",class:"d-flex justify-end"},{default:i(()=>[o(z,{onClick:l[2]||(l[2]=b=>a.$router.push("/pacientes")),class:"mx-2 text-none",color:"primary",variant:"text"},{default:i(()=>l[13]||(l[13]=[x("Cancelar")])),_:1,__:[13]}),o(z,{class:"mx-2",color:"primary",onClick:l[3]||(l[3]=b=>{U(),A.value=1})},{default:i(()=>l[14]||(l[14]=[x("Guardar")])),_:1,__:[14]})]),_:1})]),_:1})]),_:1}),N(t).SeccionConsulta==2?(M(),Y(aa,{key:0,ref_key:"MensajeAppAlerta",ref:B,callback:q.value},null,8,["callback"])):Z("",!0)],64)}}};export{ha as default};
