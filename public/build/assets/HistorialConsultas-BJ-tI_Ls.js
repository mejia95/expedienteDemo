import{_ as we}from"./App-DXzjI6g8.js";import{A as ze}from"./Aplicacion-DUGPUpZm.js";import{h as Fe}from"./moment-C5S46NFB.js";import{u as Ve,o as Me,r,a as $e,b as i,D as Ne,j as S,d as y,e as t,g as x,z as Ue,w as e,f as a,c as b,i as E,t as m,h as c,W as R,l as he,m as Y,F as q,k as De}from"./app-bY3qV11d.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppStore-B5dmMze3.js";/* empty css            */const je={class:"text-primary-darken-2",style:{"font-size":"1.195rem"}},Ae={class:"text-primary-darken-2",style:{width:"220px"}},He={class:"text-primary-darken-2",style:{width:"200px !important"}},Ie={class:"text-primary-darken-2",style:{width:"300px"}},Te={class:"text-primary-darken-2"},Be={class:"text-center",style:{width:"100px !important"}},Le={class:"pa-0"},Oe={style:{"font-size":"0.725rem"}},Se={class:"pa-0"},Ee={style:{"font-size":"0.775rem"},class:"ml-1"},Re={style:{"font-size":"0.755rem"},class:"mx-2 text-primary-darken-2 poppins-semibold"},Ye={style:{"font-size":"0.725rem"},class:"text-grey-darken-3"},qe={class:"pa-0"},We={style:{"font-size":"0.785rem"},class:"text-grey-darken-2 poppins-medium mx-1"},Ge={style:{width:"100px !important"}},Je={class:"elevation-1 bg-white"},Ke={colspan:"6"},Qe="/pacientes/{paciente}/consultas",Xe="/catalogos/consultorios",Ze="/catalogos/medicos",et="/consulta",tt={__name:"HistorialConsultas",setup(lt){const te=Ve();Me(async()=>{await te(0,{}),await U()});const A=r([]),H=r([]),W=$e(),G=W.props.id_paciente,F=ze(),le=r(null),I=r(null),V=r(!1),g=r(!1),C=r(0),h=r(0),J=r([]);r(0);const T=r(0),K=r(0),D=r(1),P=r([]),w=r([]),z=r(null),M=r(null),$=r([]),N=r([]),v=r(null),p=r(null),ae=d=>{console.log("Estos son los antecedentes");const l=`${et}/nueva`;axios.post(l,{id:d}).then(o=>{console.log("Este es el estatus");const s=o.data.id_consulta;o.data.estatus==1&&R.push(`/consulta/${s}`)}).catch(o=>{console.log(o)})},j=async d=>{v.value=d,p.value?p.value==1?p.value="-1":(p.value=null,v.value=null):p.value=1,await U()},oe=async()=>{C.value=!0,N.value=[],h.value=0,$.value=[],z.value=null,M.value=null,await U(),C.value=!1,g.value=!1},se=async()=>{g.value||(C.value=!0,await axios.get(Xe).then(d=>{A.value=d.data}).catch(d=>{A.value=[],console.log(d)}),await axios.get(Ze).then(d=>{H.value=d.data}).catch(d=>{H.value=[],console.log(d)}),C.value=!1),g.value=!g.value},ne=async d=>{D.value=d,await U()},U=async()=>{V.value=!0;let d=0,l=0,o=0;(z.value||M.value)&&(d=1),$.value.length>0&&(l=1),N.value.length>0&&(o=1),h.value=d+l+o,console.log("Este es el id del paciente",G);var s=Qe.replace("{paciente}",G);s=`${s}/historial`;var f={params:{pagina:D.value,ordenarPor:v.value,orden:p.value,busqueda:I.value,ConsultoriosFiltros:N.value,MedicosFiltros:$.value,FechaDesdeFiltro:z.value,FechaHastaFiltro:M.value}};await axios.get(s,f).then(u=>{g.value=!1,w.value=u.data.paciente,V.value=!1,P.value=u.data.consulta,T.value=u.data.consulta.total,K.value=u.data.consulta.to}).catch(u=>{g.value=!1,V.value=!1,console.log(u)})};function ie(d,l){let o;return function(...s){clearTimeout(o),o=setTimeout(()=>d.apply(this,s),l)}}const Q=ie(U,350),re=[{title:"Inicio",href:"/"},{title:"Pacientes",href:F.currentUrl},{title:"Historial de consultas",href:F.currentUrl}];return(d,l)=>{const o=i("v-col"),s=i("v-row"),f=i("v-icon"),u=i("v-btn"),k=i("v-container"),de=i("v-badge"),B=i("v-expansion-panel-title"),X=i("v-date-input"),L=i("v-expansion-panel-text"),O=i("v-expansion-panel"),Z=i("v-autocomplete"),ue=i("v-expansion-panels"),ce=i("v-card-text"),me=i("v-card"),pe=i("v-menu"),fe=i("v-text-field"),_e=i("v-skeleton-loader"),ve=i("v-avatar"),ye=i("v-hover"),xe=i("v-pagination"),ge=i("v-table"),ke=i("v-empty-state"),be=Ne("tooltip");return y(),S(q,null,[t(x(Ue),{title:"Historial de consultas"}),t(we,{breadcrumbs:re},{default:e(()=>[t(k,{fluid:"",class:"bg-white my-5 rounded-lg pa-0 px-0 px-sm-4 px-md-4 px-lg-4 px-xl-4 py-2 contenedor"},{default:e(()=>[t(s,{class:"d-flex align-start mx-2 border-b-thin","no-gutters":""},{default:e(()=>[t(o,{cols:"12",class:"text-primary pa-0 py-2"},{default:e(()=>l[14]||(l[14]=[a("span",{style:{"font-size":"0.775rem"}},"Paciente",-1)])),_:1,__:[14]})]),_:1}),t(s,{class:"d-flex align-start mx-6 border-thin rounded-lg pa-0 py-4 bg-primary-lighten-4 mt-6"},{default:e(()=>[t(o,{cols:"12",class:"text-grey-darken-2 poppins-medium pa-0 px-6"},{default:e(()=>[a("span",je,m(w.value.nombre),1)]),_:1}),t(o,{cols:"12",class:"text-grey-darken-2 poppins-medium pa-0 px-6",style:{"font-size":"0.795rem"}},{default:e(()=>[c(m(w.value.edad),1)]),_:1}),x(W).props.session.rolUsuario==3?(y(),b(o,{key:0,cols:"12",class:"text-grey-darken-2 poppins-medium pa-0 px-6 mt-2",style:{"font-size":"0.795rem"}},{default:e(()=>[t(u,{onClick:l[0]||(l[0]=n=>x(R).get(`/pacientes/perfil/${w.value.paciente}`)),variant:"flat",size:"small",class:"text-none",color:"primary"},{default:e(()=>[t(f,{size:"12"},{default:e(()=>l[15]||(l[15]=[c("mdi-account")])),_:1,__:[15]}),l[16]||(l[16]=a("span",{class:"mx-2"},"Ver perfil",-1))]),_:1,__:[16]})]),_:1})):E("",!0)]),_:1}),t(s,{class:"d-flex align-center mx-2"},{default:e(()=>[t(o,null,{default:e(()=>[t(k,{fluid:""},{default:e(()=>[t(s,{"no-gutters":""},{default:e(()=>[t(o,{cols:"12",class:"poppins-medium text-primary-darken-4",style:{"font-size":"0.995rem"}},{default:e(()=>l[17]||(l[17]=[c("Lista de consultas")])),_:1,__:[17]}),t(o,{cols:"12",style:{"font-size":"0.895rem"},class:"text-grey-darken-3"},{default:e(()=>[c(m(T.value)+" consultas registradas",1)]),_:1})]),_:1})]),_:1})]),_:1}),x(F).RolUsuario==2||x(F).RolUsuario==4||x(F).RolUsuario==5?(y(),b(o,{key:0,class:"d-flex justify-end",cols:"auto"},{default:e(()=>[he((y(),b(u,{color:"primary",onClick:l[1]||(l[1]=n=>ae(w.value.paciente))},{default:e(()=>l[18]||(l[18]=[c("Nueva")])),_:1,__:[18]})),[[be,{text:"Nueva consulta",location:"bottom"}]])]),_:1})):E("",!0)]),_:1}),t(s,{class:"d-flex align-center mx-10 mt-8 mb-8","no-gutters":""},{default:e(()=>[t(o,{cols:"12",class:"mt-2"},{default:e(()=>[t(k,{fluid:"",class:"pa-0"},{default:e(()=>[t(s,{"no-gutters":"",class:"d-flex align-end pa-0"},{default:e(()=>[t(o,{cols:"6",sm:"8",md:"8",lg:"8",xl:"8"},{default:e(()=>[t(pe,{"model-value":g.value,"close-on-content-click":!1,location:"bottom","offset-y":"",width:"300",persistent:"",transition:!1,class:"elevation-2","scroll-strategy":"block"},{activator:e(({props:n})=>[t(u,Y(n,{ref_key:"ActivadorMenu",ref:le,class:"pa-0",loading:C.value,color:"white",rounded:"lg",variant:"tonal",onClick:se}),{default:e(()=>[t(f,{size:"15",color:"primary"},{default:e(()=>l[19]||(l[19]=[c("mdi-filter-variant")])),_:1,__:[19]}),l[20]||(l[20]=a("span",{class:"mx-2 text-primary text-none"},"Filtros",-1)),h.value>0?(y(),b(de,{key:0,floating:"",color:"primary",content:h.value},null,8,["content"])):E("",!0)]),_:2,__:[20]},1040,["loading"])]),default:e(({isActive:n,props:ee})=>[t(me,Y(ee,{width:"350",class:"rounded-lg"}),{default:e(()=>[t(ce,null,{default:e(()=>[t(s,{class:"d-flex align-center"},{default:e(()=>[t(o,null,{default:e(()=>l[21]||(l[21]=[a("span",{class:"mx-4 poppins-semibold text-primary-darken-3",style:{"font-size":"1.175rem"}},"Filtros",-1)])),_:1,__:[21]}),t(o,{class:"d-flex justify-end"},{default:e(()=>[t(u,{icon:"",variant:"flat",size:"small",onClick:l[2]||(l[2]=_=>g.value=!1)},{default:e(()=>[t(f,{color:"primary"},{default:e(()=>l[22]||(l[22]=[c("mdi-close")])),_:1,__:[22]})]),_:1})]),_:1})]),_:1}),t(ue,{multiple:"",modelValue:J.value,"onUpdate:modelValue":l[7]||(l[7]=_=>J.value=_),class:"px-4 mb-5 elevation-0",color:"red-lighten-4",variant:"accordion"},{default:e(()=>[t(O,{rounded:"lg",color:"primary-lighten-4",value:"Fecha de registro"},{default:e(()=>[t(B,null,{default:e(()=>l[23]||(l[23]=[a("span",{class:"poppins-semibold text-primary-darken-3",style:{"font-size":"0.825rem"}},"Fecha de registro",-1)])),_:1,__:[23]}),t(L,null,{default:e(()=>[t(s,{"no-gutters":""},{default:e(()=>[t(o,{cols:"12",class:"px-4 mt-2"},{default:e(()=>l[24]||(l[24]=[a("span",{class:"poppins-semibold text-primary-darken-3",style:{"font-size":"0.725rem"}},"Desde",-1)])),_:1,__:[24]}),t(o,{cols:"12",class:"px-4"},{default:e(()=>[t(X,{placeholder:"dd/mm/yyyy",flat:"",density:"compact",variant:"solo-filled",modelValue:z.value,"onUpdate:modelValue":l[3]||(l[3]=_=>z.value=_),rounded:"lg","hide-details":"","ok-text":"Aceptar","cancel-text":"Cancelar"},null,8,["modelValue"])]),_:1}),t(o,{cols:"12",class:"px-4 mt-2"},{default:e(()=>l[25]||(l[25]=[a("span",{class:"poppins-semibold text-primary-darken-3",style:{"font-size":"0.725rem"}},"Hasta",-1)])),_:1,__:[25]}),t(o,{cols:"12",class:"px-4"},{default:e(()=>[t(X,{placeholder:"dd/mm/yyyy",flat:"",density:"compact",disabled:!z.value,variant:"solo-filled",max:x(Fe)().format("YYYY-MM-DD"),modelValue:M.value,"onUpdate:modelValue":l[4]||(l[4]=_=>M.value=_),rounded:"lg","hide-details":"","ok-text":"Aceptar","cancel-text":"Cancelar"},null,8,["disabled","max","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(O,{value:"Medicos",color:"primary-lighten-4",rounded:"lg"},{default:e(()=>[t(B,null,{default:e(()=>l[26]||(l[26]=[a("span",{class:"poppins-semibold text-primary-darken-3",style:{"font-size":"0.825rem"}},"Medicos",-1)])),_:1,__:[26]}),t(L,null,{default:e(()=>[t(s,{"no-gutters":""},{default:e(()=>[t(o,{cols:"12",class:"px-4"},{default:e(()=>[t(Z,{multiple:"",placeholder:"(ej. Medico 001)",variant:"solo-filled",modelValue:$.value,"onUpdate:modelValue":l[5]||(l[5]=_=>$.value=_),flat:"",items:H.value,"item-value":"_id","item-title":"nombreMedico","hide-details":"",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),t(O,{rounded:"lg",color:"primary-lighten-4",value:"Consultorios"},{default:e(()=>[t(B,null,{default:e(()=>l[27]||(l[27]=[a("span",{class:"poppins-semibold text-primary-darken-3",style:{"font-size":"0.825rem"}},"Consultorios",-1)])),_:1,__:[27]}),t(L,null,{default:e(()=>[t(s,{"no-gutters":""},{default:e(()=>[t(o,{cols:"12",class:"px-4"},{default:e(()=>[t(Z,{multiple:"",placeholder:"(ej. Clínica 001)",variant:"solo-filled",modelValue:N.value,"onUpdate:modelValue":l[6]||(l[6]=_=>N.value=_),flat:"",items:A.value,"item-value":"no_cc","hide-details":"","item-title":"nombre",density:"compact"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(s,{"no-gutters":"",class:"my-2"},{default:e(()=>[t(o,{cols:"6",class:"d-flex justify-center"},{default:e(()=>[t(u,{rounded:"lg",color:"primary",variant:"tonal",width:"95%",loading:C.value,onClick:oe},{default:e(()=>l[28]||(l[28]=[a("span",{class:"mx-1 text-none"},"Limpiar",-1)])),_:1,__:[28]},8,["loading"])]),_:1}),t(o,{cols:"6",class:"d-flex justify-center"},{default:e(()=>[t(u,{rounded:"lg",color:"primary",width:"95%",onClick:x(Q)},{default:e(()=>l[29]||(l[29]=[c("Aplicar")])),_:1,__:[29]},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:2},1040)]),_:1},8,["model-value"])]),_:1}),t(o,{cols:"6",sm:"4",md:"4",lg:"4",xl:"4",class:"d-flex justify-end"},{default:e(()=>[t(fe,{density:"compact",label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"",readonly:V.value,modelValue:I.value,"onUpdate:modelValue":[l[8]||(l[8]=n=>I.value=n),x(Q)],"hide-details":"",rounded:"lg","single-line":""},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),V.value?(y(),b(o,{key:0,cols:"12"},{default:e(()=>[t(_e,{type:"table-tbody"})]),_:1})):(y(),S(q,{key:1},[P.value.total>0?(y(),b(o,{key:0,class:"mt-1",cols:"12"},{default:e(()=>[t(ge,{density:"compact",class:"rounded-lg elevation-0 border-thin"},{default:e(()=>[a("thead",null,[a("tr",null,[l[34]||(l[34]=a("th",{class:"text-primary-darken-2 text-center"},"No",-1)),a("th",Ae,[l[30]||(l[30]=a("span",{class:"mr-2"},"Identificador",-1)),t(u,{icon:"",variant:"flat",size:"x-small",onClick:l[9]||(l[9]=n=>j("idConsulta"))},{default:e(()=>[t(f,{color:"primary"},{default:e(()=>[c(m(v.value=="idConsulta"&&p.value==1?"mdi-menu-up":v.value=="idConsulta"&&p.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),a("th",He,[l[31]||(l[31]=a("span",{class:"mr-2"},"Fecha de registro",-1)),t(u,{icon:"",variant:"flat",size:"x-small",onClick:l[10]||(l[10]=n=>j("fecha_creacion"))},{default:e(()=>[t(f,{color:"primary"},{default:e(()=>[c(m(v.value=="fecha_creacion"&&p.value==1?"mdi-menu-up":v.value=="fecha_creacion"&&p.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),a("th",Ie,[l[32]||(l[32]=a("span",{class:"mr-2"},"Médico",-1)),t(u,{icon:"",variant:"flat",size:"x-small",onClick:l[11]||(l[11]=n=>j("NombreMedico"))},{default:e(()=>[t(f,{color:"primary"},{default:e(()=>[c(m(v.value=="NombreMedico"&&p.value==1?"mdi-menu-up":v.value=="NombreMedico"&&p.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),a("th",Te,[l[33]||(l[33]=a("span",{class:"mr-2"},"Consultorio",-1)),t(u,{icon:"",variant:"flat",size:"x-small",onClick:l[12]||(l[12]=n=>j("consultorio"))},{default:e(()=>[t(f,{color:"primary"},{default:e(()=>[c(m(v.value=="consultorio"&&p.value==1?"mdi-menu-up":v.value=="consultorio"&&p.value==-1?"mdi-menu-down":"mdi-menu-swap"),1)]),_:1})]),_:1})]),l[35]||(l[35]=a("th",{class:"text-primary-darken-2"},null,-1))])]),a("tbody",null,[(y(!0),S(q,null,De(P.value.data,(n,ee)=>(y(),b(ye,null,{default:e(({isHovering:_,props:Ce})=>[a("tr",Y({ref_for:!0},Ce,{class:_?"bg-grey-lighten-5 cursor-pointer":null}),[a("td",Be,m(n.index),1),a("td",Le,[t(k,{fluid:""},{default:e(()=>[t(s,{class:"d-flex align-center","no-gutters":""},{default:e(()=>[t(o,{cols:"12",class:"text-uppercase"},{default:e(()=>[a("span",Oe,m(n._id),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),a("td",Se,[t(k,{fluid:"",style:{"min-width":"200px !important"}},{default:e(()=>[t(s,{class:"d-flex align-center","no-gutters":""},{default:e(()=>[t(o,{cols:"12"},{default:e(()=>[a("span",null,[t(f,{size:"16"},{default:e(()=>l[36]||(l[36]=[c("mdi-clock")])),_:1,__:[36]})]),a("span",Ee,m(n.fecha_creacion),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),a("td",null,[t(k,{fluid:"",class:"pa-0 d-flex align-center py-2",style:{"min-width":"300px"}},{default:e(()=>[t(s,{"no-gutters":"",class:"d-flex align-center justify-start"},{default:e(()=>[t(o,{cols:"12",class:"text-start"},{default:e(()=>[t(ve,{color:"primary-lighten-4",size:"18"},{default:e(()=>[t(f,{size:"16",color:"primary"},{default:e(()=>l[37]||(l[37]=[c("mdi-doctor")])),_:1,__:[37]})]),_:1}),a("span",Re,m(n.NombreMedico?n.NombreMedico:"S/D"),1)]),_:2},1024),t(o,{cols:"12"},{default:e(()=>[a("span",Ye,m(n.medico_titulado?`Ced. ${n.medico_cedula}`:`No. ${n.medico_cuenta}`),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),a("td",qe,[t(k,{fluid:"",class:"pa-0"},{default:e(()=>[t(s,{class:"d-flex align-center","no-gutters":"",style:{"max-width":"100%"}},{default:e(()=>[t(o,{cols:"12",class:"text-no-wrap"},{default:e(()=>[a("span",null,[t(f,{size:"12"},{default:e(()=>l[38]||(l[38]=[c("mdi-domain")])),_:1,__:[38]})]),a("span",We,m(n.consultorio?n.consultorio:"S/R"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),a("td",Ge,[t(u,{size:"small",icon:"",variant:"flat",onClick:at=>x(R).get(`/pacientes/resumen/${w.value.paciente}/consulta/${n._id}`)},{default:e(()=>[t(f,{color:"primary"},{default:e(()=>l[39]||(l[39]=[c("mdi-eye")])),_:1,__:[39]})]),_:2},1032,["onClick"])])],16)]),_:2},1024))),256))]),a("tfoot",null,[a("tr",Je,[a("td",Ke,[t(k,{fluid:"",class:"pa-0"},{default:e(()=>[t(s,{"no-gutters":""},{default:e(()=>[t(o,{class:"d-flex align-center text-primary-darken-2"},{default:e(()=>[c(" Mostrando "+m(K.value)+" de "+m(T.value)+" registros ",1)]),_:1}),t(o,{class:"d-flex justify-end align-center"},{default:e(()=>[t(xe,{modelValue:D.value,"onUpdate:modelValue":[l[13]||(l[13]=n=>D.value=n),ne],density:"compact",length:P.value.last_page,"total-visible":5,color:"primary"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})])])])]),_:1})]),_:1})):(y(),b(o,{key:1,cols:"12"},{default:e(()=>[t(ke,{color:"primary",icon:"mdi-magnify"},{title:e(()=>l[40]||(l[40]=[a("p",{class:"text-primary-darken-2 poppins-semibold"}," Sin resultados ",-1)])),text:e(()=>l[41]||(l[41]=[a("p",{class:"text-grey-darken-3"}," No se encontraron datos que coincidan con los filtros aplicados o no hay información disponible en este momento. ",-1)])),_:1})]),_:1}))],64))]),_:1})]),_:1})]),_:1})],64)}}},ct=Pe(tt,[["__scopeId","data-v-bec347e9"]]);export{ct as default};
