import{A as O}from"./Aplicacion-DUGPUpZm.js";import{r as c,a as J,u as K,p as Q,b as r,j as R,d as B,e,c as W,i as X,w as s,f,h as v,t as Y,g as d,m as A,F as Z}from"./app-bY3qV11d.js";import{A as oo}from"./AppAlerta-CEk7FTVV.js";/* empty css            */import"./AppStore-B5dmMze3.js";/* empty css                                                                  */import"./_plugin-vue_export-helper-DlAUqK2U.js";const S="/catalogos",$="/consulta/",mo={__name:"Diagnosticos",setup(ao,{expose:G}){const w=c(!0),k=c(!0),E=c(!0),x=J().props.id,N=async l=>{const a=`${S}/diagnosticos-todos`;w.value=!1,await axios.get(a,{params:{busqueda:l,seleccionados:o.diagnosticos_sindromaticos}}).then(i=>{V.value=i.data,console.log("Diagnósticos sindromáticos",i.data),p.value=!1}).catch(i=>{console.log(i),p.value=!1})},C=async l=>{const a=`${S}/diagnosticos-todos`;k.value=!1,await axios.get(a,{params:{busqueda:l,seleccionados:o.diagnosticos_etiologicos}}).then(i=>{j.value=i.data,_.value=!1}).catch(i=>{console.log(i),_.value=!1})},I=async l=>{const a=`${S}/diagnosticos-todos`;E.value=!1,await axios.get(a,{params:{busqueda:l,seleccionados:o.diagnosticos_diferenciales}}).then(i=>{z.value=i.data,g.value=!1}).catch(i=>{console.log(i),g.value=!1})},M=K(),V=c([]),j=c([]),z=c([]),T=c(null),U=c(0),g=c(!1),p=c(!1),_=c(!1),o=O(),F=async()=>{if(U.value==0){var l=`${$}${x}/obten-diagnostico`;await axios.get(l).then(async a=>{o.diagnosticos_diferenciales=a.data.diagnosticos_diferenciales,o.diagnosticos_diferenciales.length>0&&await I(),o.diagnosticos_etiologicos=a.data.diagnosticos_etiologicos,o.diagnosticos_etiologicos.length>0&&await C(),o.diagnosticos_sindromaticos=a.data.diagnosticos_sindromaticos,o.diagnosticos_sindromaticos.length>0&&await N(),a.data.diagnosticos_diferenciales.length>0||a.data.diagnosticos_sindromaticos.length>0||a.data.diagnosticos_etiologicos.length>0?o.seccion_diagnostico=!0:o.seccion_diagnostico=!1}).catch(a=>{console.log(a),o.seccion_diagnostico=!1})}},H=async()=>{await M("#contenedor-consulta",{}),o.EstadoAlerta=1,o.MostrarAlerta=!0,o.TituloAlerta="¿Estás seguro?",o.IconoAlerta="mdi-help-circle",o.MensajeAlerta="La información que ha ingresado se guardará. Asegúrese de que todos los datos sean correctos antes de continuar.",o.CallbackAlerta="GuardarSeccion"};return Q("FuncionesPadre",{GuardarSeccion:()=>{var l=[];o.diagnosticos_sindromaticos.forEach(t=>{l.push(t.dId)});var a=[];o.diagnosticos_etiologicos.forEach(t=>{a.push(t.dId)});var i=[];o.diagnosticos_diferenciales.forEach(t=>{i.push(t.dId)});var b={consulta:x,diagnosticos_sindromaticos:l,diagnosticos_etiologicos:a,diagnosticos_diferenciales:i},h=`${$}${x}/diagnostico`;axios.post(h,b).then(t=>{o.seccion_diagnostico=!0,o.EstadoAlerta=2,o.MostrarAlerta=!0,o.TituloAlerta="Éxito",o.IconoAlerta="mdi-check-circle",o.MensajeAlerta=t.data.message,o.CallbackAlerta=null}).catch(t=>{o.EstadoAlerta=0,o.MostrarAlerta=!0,o.TituloAlerta="Error",o.IconoAlerta="mdi-close-circle",o.MensajeAlerta=t.response.data?t.response.data.message:"Ha ocurrido un error. Por favor, inténtalo de nuevo más tarde.",o.CallbackAlerta=null})}}),G({ObtenerDatosDiagnostico:F}),(l,a)=>{const i=r("v-icon"),b=r("v-avatar"),h=r("v-toolbar-title"),t=r("v-col"),u=r("v-row"),L=r("v-toolbar"),y=r("v-chip"),D=r("v-autocomplete"),q=r("v-btn"),P=r("v-container");return B(),R(Z,null,[e(L,{color:"white",class:"pa-0 border-sm rounded-t-lg"},{default:s(()=>[e(u,null,{default:s(()=>[e(t,{class:"d-flex align-center"},{default:s(()=>[e(h,{class:"ps-5 text-primary"},{default:s(()=>[e(i,{size:"18"},{default:s(()=>a[4]||(a[4]=[v("mdi-medical-bag")])),_:1,__:[4]}),a[5]||(a[5]=f("span",{class:"mx-1 poppins-semibold",style:{"font-size":"1.1rem"}}," Diagnósticos ",-1)),e(b,{size:"25",rounded:"pill",color:"primary-primary",class:"mx-2"},{default:s(()=>[e(i,{size:"15"},{default:s(()=>[v(Y(d(o).seccion_diagnostico?"mdi-check-circle":"mdi-content-save-alert"),1)]),_:1})]),_:1})]),_:1,__:[5]})]),_:1})]),_:1})]),_:1}),e(P,{class:"rounded-b-xl px-4 px-sm-6 px-md-6 px-lg-6 px-xl-6 border",fluid:""},{default:s(()=>[e(u,{class:"px-sm-2 px-md-4 px-lg-8 px-xl-8 mt-5","no-gutters":""},{default:s(()=>[e(t,{class:"d-flex align-center",cols:"12"},{default:s(()=>a[6]||(a[6]=[f("span",{style:{"font-size":"0.875rem"},class:"poppins-semibold"},"Diagnósticos sindromáticos ",-1)])),_:1,__:[6]}),e(t,{class:"d-flex align-center",cols:"12"},{default:s(()=>[e(D,{"onUpdate:search":N,"no-data-text":w.value?"Empieza a escribir para ver las coincidencias disponibles.":"No se encontró ningún diagnóstico relacionado. Intente con otra búsqueda.","return-object":"",color:"primary","hide-selected":"",loading:p.value,disabled:p.value,"menu-props":{scrollStrategy:"block",width:"200",maxHeight:"200",contentClass:"rounded-lg"},chips:"","hide-details":"",modelValue:d(o).diagnosticos_sindromaticos,"onUpdate:modelValue":a[0]||(a[0]=n=>d(o).diagnosticos_sindromaticos=n),multiple:"",items:V.value,"item-value":"dId","item-title":"diNombre",variant:"outlined",flat:"",rounded:"lg","item-color":"primary","closable-chips":"",placeholder:"Ingrese los diagnósticos sindromáticos del paciente (ej. Síndrome de fatiga crónica, Síndrome metabólico, etc.)"},{chip:s(({props:n,item:m})=>[e(y,A(n,{color:"primary",text:m.raw.diNombre}),null,16,["text"])]),_:1},8,["no-data-text","loading","disabled","modelValue","items"])]),_:1})]),_:1}),e(u,{class:"px-sm-2 px-md-4 px-lg-8 px-xl-8 mt-5"},{default:s(()=>[e(t,{class:"d-flex align-center",cols:"12"},{default:s(()=>a[7]||(a[7]=[f("span",{style:{"font-size":"0.875rem"},class:"poppins-semibold"},"Diagnósticos etiológicos",-1)])),_:1,__:[7]}),e(t,{class:"d-flex align-center",cols:"12"},{default:s(()=>[e(D,{"no-data-text":k.value?"Empieza a escribir para ver las coincidencias disponibles.":"No se encontró ningún diagnóstico relacionado. Intente con otra búsqueda.","onUpdate:search":C,"return-object":"","hide-selected":"",color:"primary",loading:_.value,disabled:_.value,"menu-props":{scrollStrategy:"block",width:"200",maxHeight:"200",contentClass:"rounded-lg"},chips:"","hide-details":"",variant:"outlined",flat:"",rounded:"lg",modelValue:d(o).diagnosticos_etiologicos,"onUpdate:modelValue":a[1]||(a[1]=n=>d(o).diagnosticos_etiologicos=n),multiple:"",items:j.value,"item-value":"dId","item-title":"diNombre","item-color":"primary","closable-chips":"",placeholder:"Ingrese los diagnósticos sindromáticos del paciente (ej. Síndrome de fatiga crónica, Síndrome metabólico, etc.)"},{chip:s(({props:n,item:m})=>[e(y,A(n,{color:"primary",text:m.raw.diNombre}),null,16,["text"])]),_:1},8,["no-data-text","loading","disabled","modelValue","items"])]),_:1})]),_:1}),e(u,{class:"px-sm-2 px-md-4 px-lg-8 px-xl-8 mt-5"},{default:s(()=>[e(t,{class:"d-flex align-center",cols:"12"},{default:s(()=>a[8]||(a[8]=[f("span",{style:{"font-size":"0.875rem"},class:"poppins-semibold"},"Diagnósticos diferenciales",-1)])),_:1,__:[8]}),e(t,{class:"d-flex align-center",cols:"12"},{default:s(()=>[e(D,{"no-data-text":E.value?"Empieza a escribir para ver las coincidencias disponibles.":"No se encontró ningún diagnóstico relacionado. Intente con otra búsqueda.",color:"primary","onUpdate:search":I,"return-object":"","hide-selected":"",loading:g.value,disabled:g.value,"menu-props":{scrollStrategy:"block",width:"200",maxHeight:"200",contentClass:"rounded-lg"},chips:"","hide-details":"",variant:"outlined",flat:"",rounded:"lg",modelValue:d(o).diagnosticos_diferenciales,"onUpdate:modelValue":a[2]||(a[2]=n=>d(o).diagnosticos_diferenciales=n),multiple:"",items:z.value,"item-value":"dId","item-title":"diNombre","item-color":"primary","closable-chips":"",placeholder:"Ingrese los diagnósticos sindromáticos del paciente (ej. Síndrome de fatiga crónica, Síndrome metabólico, etc.)"},{chip:s(({props:n,item:m})=>[e(y,A(n,{color:"primary",text:m.raw.diNombre}),null,16,["text"])]),_:1},8,["no-data-text","loading","disabled","modelValue","items"])]),_:1})]),_:1}),e(u,{class:"d-flex align-center ma-2"},{default:s(()=>[e(t,{cols:"12",class:"d-flex justify-end"},{default:s(()=>[e(q,{onClick:a[3]||(a[3]=n=>l.$router.push("/pacientes")),class:"mx-2 text-none",color:"primary",variant:"text"},{default:s(()=>a[9]||(a[9]=[v("Cancelar")])),_:1,__:[9]}),e(q,{class:"mx-2",color:"primary",onClick:H},{default:s(()=>a[10]||(a[10]=[v("Guardar")])),_:1,__:[10]})]),_:1})]),_:1})]),_:1}),d(o).SeccionConsulta==3?(B(),W(oo,{key:0,ref:"Alerta",callback:T.value},null,8,["callback"])):X("",!0)],64)}}};export{mo as default};
