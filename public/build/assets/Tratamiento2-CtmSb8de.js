import{A as ee}from"./Aplicacion-DUGPUpZm.js";import{A as le}from"./AppAlerta-CEk7FTVV.js";import{u as te,a as ae,r,o as oe,p as se,b as d,j as k,d as m,e as t,c as y,i as C,w as a,f as o,h as x,g as c,F as P,k as ne,t as U,W as F}from"./app-bY3qV11d.js";import"./AppStore-B5dmMze3.js";/* empty css                                                                  */import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const re={class:"pa-0"},ie={class:"pa-0 d-flex justify-center mt-8"},de={style:{"font-size":"0.825rem"}},ue={style:{"font-size":"0.825rem"}},ce="/catalogos",me="/consulta",Ve={__name:"Tratamiento2",setup(pe,{expose:B,emit:_e}){const D=te(),l=ee(),b=ae().props.id,L=r(null),N=r(null),V=r([]);r(1);const z=r([]),_=r(null),f=r(null),M=r([]),v=r(!1);r(!1),r([]);const $=r(null);r([n=>/^[a-zA-Z0-9 -/().,:;*áéíóúÁÉÍÓÚ]+$/.test(n)||"Debe contener letras y un números"]);const R=r([n=>!!n||"El campo es requerido"]),T=r(null);oe(async()=>{});const S=async()=>{const{valid:n}=await T.value.validate();n&&G()},q=()=>{const n=`${ce}/medicamentos/consultorio`;axios.get(n).then(e=>{V.value=e.data[0].medicamentos}).catch(e=>e.response.status==419||e.response.status==420||e.response.status==401||e.response.status==409?location.reload():console.log(e))},G=()=>{z.value.push(_.value),M.value.push(f.value),l.arreglo_medicamento.push({id:_.value,dosis:f.value}),v.value=!1,_.value=null,f.value=null},H=n=>{l.arreglo_medicamento.splice(n,1),z.value.splice(n,1),M.value.splice(n,1)},W=async()=>{await D("#contenedor-consulta",{}),l.EstadoAlerta=1,l.MostrarAlerta=!0,l.TituloAlerta="¿Estás seguro?",l.IconoAlerta="mdi-help-circle",l.MensajeAlerta="La información que ha ingresado se guardará. Asegúrese de que todos los datos sean correctos antes de continuar.",l.CallbackAlerta="AgregarTratamiento"},O=async()=>{const n={id_consulta:b,plan_terapeutico:l.plan_terapeutico,ordenes_estudios:l.ordenes_estudios,indicaciones_receta:l.indicaciones_receta,arreglo_medicamento:l.arreglo_medicamento,edad:l.paciente.edad,consultorio:l.seleccion_clinica};if(l.seleccion_clinica!=null&&l.peso&&l.altura&&l.temperatura&&l.paciente.edad){const e=`${me}/${b}/tratamiento`;axios.post(e,n).then(async p=>{await j()}).catch(p=>{l.EstadoAlerta=2,l.MostrarAlerta=!0,l.TituloAlerta="Error",l.IconoAlerta="mdi-close-circle",l.MensajeAlerta=p.response?p.response.data.message:"Ha ocurrido un error",l.CallbackAlerta=null}),l.opcion_faltante=0}else{const e=l.seleccion_clinica?l.peso?l.altura?l.temperatura?null:"TEMPERATURA":"ALTURA":"PESO":"CLÍNICA";l.opcion_clinica_faltante=l.seleccion_clinica?0:1,l.opcion_faltante=l.peso&&l.altura&&l.temperatura?0:1,$.value.validate(),l.EstadoAlerta=0,l.MostrarAlerta=!0,l.TituloAlerta="Error",l.IconoAlerta="mdi-close-circle",l.MensajeAlerta="Falta agregar el campo de: "+e,l.CallbackAlerta=null}},Z=()=>{F.push("/pacientes")},j=()=>{F.get(`/pacientes/resumen/${l.paciente._id}/consulta/${b}`)};return se("FuncionesPadre",{AgregarTratamiento:O,Importar_PDF:j}),B({ConsultaMedicamentos:q}),(n,e)=>{const p=d("v-icon"),J=d("v-toolbar-title"),i=d("v-col"),u=d("v-row"),K=d("v-toolbar"),A=d("v-textarea"),g=d("v-btn"),Q=d("v-autocomplete"),X=d("v-text-field"),w=d("v-table"),E=d("v-container"),Y=d("v-form"),h=d("v-divider");return m(),k(P,null,[t(K,{color:"white",class:"pa-0 border-sm rounded-t-lg"},{default:a(()=>[t(u,null,{default:a(()=>[t(i,{class:"d-flex align-center"},{default:a(()=>[t(J,{class:"ps-5 text-primary-darken-3"},{default:a(()=>[t(p,{size:"18"},{default:a(()=>e[10]||(e[10]=[x("mdi-clipboard-plus-outline")])),_:1,__:[10]}),e[11]||(e[11]=o("span",{class:"mx-1 poppins-semibold",style:{"font-size":"1.1rem"}}," Tratamiento ",-1))]),_:1,__:[11]})]),_:1})]),_:1})]),_:1}),t(E,{class:"rounded-b-xl px-4 px-sm-6 px-md-6 px-lg-6 px-xl-6 border",fluid:""},{default:a(()=>[t(u,{class:"px-4 mt-5"},{default:a(()=>[t(i,{class:"d-flex align-center",cols:"12",sm:"6",md:"4",lg:"3",xl:"3"},{default:a(()=>e[12]||(e[12]=[o("span",{style:{"font-size":"0.875rem"},class:"poppins-semibold"},"Plan terapéutico ",-1)])),_:1,__:[12]}),t(i,{class:"d-flex align-center",cols:"12",sm:"6",md:"8",lg:"9",xl:"9"},{default:a(()=>[t(A,{modelValue:c(l).plan_terapeutico,"onUpdate:modelValue":e[0]||(e[0]=s=>c(l).plan_terapeutico=s),color:"primary",variant:"outlined",flat:"",density:"compact",ref_key:"terapeutico",ref:$,counter:255,maxlength:"255","auto-grow":"",placeholder:"Ingrese el plan terapéutico",rounded:"lg"},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{class:"px-4 mt-5"},{default:a(()=>[t(i,{class:"d-flex align-center",cols:"12",sm:"6",md:"4",lg:"3",xl:"3"},{default:a(()=>e[13]||(e[13]=[o("span",{style:{"font-size":"0.875rem"},class:"poppins-semibold"},"Órdenes de estudios",-1)])),_:1,__:[13]}),t(i,{class:"d-flex align-center",cols:"12",sm:"6",md:"8",lg:"9",xl:"9"},{default:a(()=>[t(A,{modelValue:c(l).ordenes_estudios,"onUpdate:modelValue":e[1]||(e[1]=s=>c(l).ordenes_estudios=s),color:"primary",variant:"outlined",flat:"",density:"compact",counter:255,maxlength:"255","auto-grow":"",placeholder:"Ingrese los órdenes de estudios",rounded:"lg"},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{class:"px-4 mt-5"},{default:a(()=>[t(i,{class:"d-flex align-center",cols:"12",sm:"6",md:"4",lg:"3",xl:"3"},{default:a(()=>e[14]||(e[14]=[o("span",{style:{"font-size":"0.875rem"},class:"poppins-semibold"},"Indicaciones",-1)])),_:1,__:[14]}),t(i,{class:"d-flex align-center",cols:"12",sm:"6",md:"8",lg:"9",xl:"9"},{default:a(()=>[t(A,{modelValue:c(l).indicaciones_receta,"onUpdate:modelValue":e[2]||(e[2]=s=>c(l).indicaciones_receta=s),color:"primary",variant:"outlined",flat:"",density:"compact",counter:255,maxlength:"255","auto-grow":"",placeholder:"Proporcione las indicaciones que se le deben dar al paciente",rounded:"lg"},null,8,["modelValue"])]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(i,null,{default:a(()=>e[15]||(e[15]=[o("span",{class:"text-primary"}," Medicamento ",-1)])),_:1,__:[15]})]),_:1}),t(u,null,{default:a(()=>[v.value?(m(),y(i,{key:1,class:"d-flex justify-end"},{default:a(()=>[t(g,{class:"text-none",color:"primary",variant:"tonal",rounded:"lg",onClick:e[4]||(e[4]=s=>{v.value=!1,_.value=null,f.value=null})},{default:a(()=>[t(p,{size:"15"},{default:a(()=>e[18]||(e[18]=[x("mdi-close")])),_:1,__:[18]}),e[19]||(e[19]=o("span",{class:"mx-2"},"Cancelar medicamento",-1))]),_:1,__:[19]})]),_:1})):(m(),y(i,{key:0},{default:a(()=>[t(g,{class:"text-none",color:"primary",variant:"tonal",rounded:"lg",onClick:e[3]||(e[3]=s=>v.value=!0)},{default:a(()=>[t(p,{size:"15"},{default:a(()=>e[16]||(e[16]=[x("mdi-plus-circle-outline")])),_:1,__:[16]}),e[17]||(e[17]=o("span",{class:"mx-2",style:{"font-size":"0.825rem"}},"Agregar medicamento",-1))]),_:1,__:[17]})]),_:1}))]),_:1}),t(Y,{ref_key:"form",ref:T},{default:a(()=>[v.value==!0?(m(),y(u,{key:0},{default:a(()=>[t(i,{cols:"12"},{default:a(()=>[t(E,{fluid:"",class:"pa-0"},{default:a(()=>[t(u,null,{default:a(()=>[t(i,{cols:"12"},{default:a(()=>[t(w,null,{default:a(()=>[e[20]||(e[20]=o("thead",{class:"rounded-lg bg-primary-lighten-5"},[o("tr",null,[o("th",{class:"poppins-semibold",style:{"font-size":"0.825rem"}},"Medicamento"),o("th",{class:"poppins-semibold",style:{"font-size":"0.825rem"}},"Dosis"),o("th",{class:"poppins-semibold",style:{"font-size":"0.825rem"}})])],-1)),o("tbody",null,[o("tr",null,[o("td",null,[t(Q,{class:"my-4","menu-props":{scrollStrategy:"block",width:"200",maxHeight:"200",contentClass:"rounded-lg"},modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=s=>_.value=s),variant:"outlined",rounded:"lg",flat:"",color:"primary",placeholder:"Ingrese el nombre del medicamento (ej. Paracetamol)",items:V.value,"item-value":n.numero,"item-title":s=>`${s.farmacos} - ${s.forma_farmaceutica}`,rules:R.value},null,8,["modelValue","items","item-value","item-title","rules"])]),o("td",re,[t(X,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=s=>f.value=s),counter:255,placeholder:"Ingrese la dosis y frecuencia (ej. 500 mg cada 8 horas)",variant:"outlined",class:"my-2"},null,8,["modelValue"])]),o("td",ie,[t(g,{rounded:"lg",density:"compact",icon:"mdi-plus",color:"primary-lighten-2",onClick:e[7]||(e[7]=s=>S())})])])])]),_:1,__:[20]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):C("",!0)]),_:1},512),c(l).arreglo_medicamento.length?(m(),y(u,{key:0},{default:a(()=>[t(i,null,{default:a(()=>[t(w,{class:"border-thin rounded-lg"},{default:a(()=>[e[21]||(e[21]=o("thead",{class:"rounded-lg bg-primary-lighten-5"},[o("tr",null,[o("th",{class:"poppins-semibold",style:{"font-size":"0.875rem"}},"Medicamento"),o("th",{class:"poppins-semibold",style:{"font-size":"0.875rem"}},"Dosis recetada"),o("th",{class:"poppins-semibold",style:{"font-size":"0.875rem"}})])],-1)),o("tbody",null,[(m(!0),k(P,null,ne(c(l).arreglo_medicamento,(s,I)=>(m(),k("tr",{key:I},[o("td",null,[o("span",de,U(s.id),1)]),o("td",null,[o("span",ue,U(s.dosis),1)]),o("td",null,[t(g,{variant:"text",icon:"mdi-delete",style:{color:"#e74c3c"},onClick:ve=>H(I)},null,8,["onClick"])])]))),128))])]),_:1,__:[21]})]),_:1})]),_:1})):C("",!0),t(h),t(u,{class:"d-flex align-center ma-2"},{default:a(()=>[t(i,{cols:"12",class:"d-flex justify-end"},{default:a(()=>[t(g,{class:"mx-2",color:"primary",variant:"text",onClick:e[8]||(e[8]=s=>Z())},{default:a(()=>e[22]||(e[22]=[x("Cancelar")])),_:1,__:[22]}),t(g,{class:"mx-2",color:"primary",disabled:v.value!=!1,onClick:e[9]||(e[9]=s=>W())},{default:a(()=>e[23]||(e[23]=[x("Finalizar")])),_:1,__:[23]},8,["disabled"])]),_:1})]),_:1})]),_:1}),c(l).SeccionConsulta==4?(m(),y(le,{key:0,ref_key:"MensajeAppAlerta",ref:L,callback:N.value},null,8,["callback"])):C("",!0)],64)}}};export{Ve as default};
